/*!
* chartjs-plugin-annotation v0.5.7
* undefined
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["chartjs-plugin-annotation"]=e(t.Chart)}(this,(function(t){"use strict";
/*!
 * Chart.js v3.0.0-beta
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */function e(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function n(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){if(e(t))return t.map(o);if(n(t)){const e={},n=Object.keys(t),r=n.length;let a=0;for(;a<r;++a)e[n[a]]=o(t[n[a]]);return e}return t}function r(t,e,r,i){const s=e[t],l=r[t];n(s)&&n(l)?a(s,l,i):e[t]=o(l)}function a(t,o,a){const i=e(o)?o:[o],s=i.length;if(!n(t))return t;const l=(a=a||{}).merger||r;for(let e=0;e<s;++e){if(!n(o=i[e]))continue;const r=Object.keys(o);for(let e=0,n=r.length;e<n;++e)l(r[e],t,o,a)}return t}
/*!
 * Chart.js v3.0.0-beta
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */class i extends t.Element{inRange(t,e,n){const{x:o,y:r,width:a,height:i}=this.getProps(["x","y","width","height"],n);return t>=o&&t<=o+a&&e>=r&&e<=r+i}getCenterPoint(t){const{x:e,y:n,width:o,height:r}=this.getProps(["x","y","width","height"],t);return{x:e+o/2,y:n+r/2}}draw(t){const{x:e,y:n,width:o,height:r,options:a}=this;t.save(),t.lineWidth=a.borderWidth,t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,t.fillRect(e,n,o,r),t.strokeRect(e,n,o,r),t.restore()}}i.id="boxAnnotation",i.defaults={borderWidth:1},i.defaultRoutes={borderColor:"color",backgroundColor:"color"};const s=Math.PI,l=s/2;class c extends t.Element{draw(t){const{x:n,y:o,x2:r,y2:a,options:i}=this;t.save(),t.lineWidth=i.borderWidth,t.strokeStyle=i.borderColor,t.setLineDash&&t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,t.beginPath(),t.moveTo(n,o),t.lineTo(r,a),t.stroke();const c=i.label;c&&c.enabled&&c.content&&function(t,n){const o=n.options.label;t.font=(r=o.font.size,a=o.font.style,i=o.font.family,a+" "+r+"px "+i),t.textAlign="center";
/*!
 * Chart.js v3.0.0-beta
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */
var r,a,i;const{width:c,height:y}=function(t,n){const o=n.content,r=e(o)?o:[o],a=r.length;let i=0;for(let e=0;e<a;e++){const n=r[e];f.has(n)||f.set(n,t.measureText(n).width),i=Math.max(i,f.get(n))}return i+=2*n.xPadding,{width:i,height:a*n.font.size+(a+1)*n.yPadding}}(t,o),x=function(t,e,n){const o=t.options.label,{xPadding:r,xAdjust:a,yPadding:i,yAdjust:s}=o,l={x:t.x,y:t.y},c={x:t.x2,y:t.y2};let f,y,x;switch(o.position){case"top":y=i+s,f=h(y,l,c);break;case"bottom":y=n-i+s,f=h(y,l,c);break;case"left":f=r+a,y=u(f,l,c);break;case"right":f=e-r+a,y=u(f,l,c);break;default:x=d(l,c,.5),f=x.x+a,y=x.y+s}return{x:f,y:y}}(n,c,y);if(t.translate(x.x,x.y),t.rotate(o.rotation*s/180),t.fillStyle=o.backgroundColor,function(t,e,n,o,r,a){if(a){const i=Math.min(a,r/2,o/2),c=e+i,f=n+i,d=e+o-i,h=n+r-i;t.moveTo(e,f),c<d&&f<h?(t.arc(c,f,i,-s,-l),t.arc(d,f,i,-l,0),t.arc(d,h,i,0,l),t.arc(c,h,i,l,s)):c<d?(t.moveTo(c,n),t.arc(d,f,i,-l,l),t.arc(c,f,i,l,s+l)):f<h?(t.arc(c,f,i,-s,0),t.arc(c,h,i,0,s)):t.arc(c,f,i,-s,s),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,o,r)}(t,-c/2,-y/2,c,y,o.cornerRadius),t.fill(),t.fillStyle=o.font.color,e(o.content)){let e=-y/2+o.yPadding;for(let n=0;n<o.content.length;n++)t.textBaseline="top",t.fillText(o.content[n],-c/2+c/2,e),e+=o.font.size+o.yPadding}else t.textBaseline="middle",t.fillText(o.content,0,0)}(t,this),t.restore()}}c.id="lineAnnotation",c.defaults={borderDash:[],borderDashOffset:0,label:{backgroundColor:"rgba(0,0,0,0.8)",font:{family:t.defaults.font.family,size:t.defaults.font.size,style:"bold",color:"#fff"},xPadding:6,yPadding:6,rotation:0,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null}};const f=new Map;const d=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),h=(t,e,n)=>d(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,u=(t,e,n)=>d(e,n,Math.abs((t-e.x)/(n.x-e.x))).y;const y=new Map,x={box:i,line:c};var b={id:"annotation",afterUpdate(t,e){g(t,e)},resize(t,e){g(t,e,"resize")},beforeDatasetDraw(t,e){w(t,e,"beforeDatasetsDraw")},afterDatasetsDraw(t,e){w(t,e,"afterDatasetsDraw")},afterDraw(t,e){w(t,e,"afterDraw")},afterEvent(t,e,n,o){-1!==(o.events||[]).indexOf(e.type)&&handleEvent(t,e,o)},destroy(t){y.remove(t)},defaults:{drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[],animation:{numbers:{properties:["x","y","x2","y2","width","height"],type:"number"}}}};function g(e,n,o){const r=e.options.animation,i=r&&a({},[r,n.animation]),s=new t.Animations(e,i,o),l=y.get(e)||y.set(e,[]).get(e),c=n.annotations||[],f=c.length,d=l.length;if(d<f){const t=f-d;l.splice(d,0,...new Array(t))}else d>f&&l.splice(f,d-f);for(let t=0;t<c.length;t++){const n=c[t];let o=l[t];const r=x[n.type]||x.line;o&&o instanceof r||(o=l[t]=new r);const a=m(e,n,r.defaults);s.update(o,a)}}const p=(t,e,n)=>(t=>("number"==typeof t||t instanceof Number)&&isFinite(+t))(e)?t.getPixelForValue(e):n;function m(t,e,n){const o=t.scales[e.scaleID];let r,i,{top:s,left:l,bottom:c,right:f}=t.chartArea;if(o)r=p(o,e.value,NaN),i=p(o,e.endValue,r),o.isHorizontal()?(l=Math.min(r,i),f=Math.max(r,i)):(s=Math.min(r,i),c=Math.max(r,i));else{const n=t.scales[e.xScaleID],o=t.scales[e.yScaleID];n&&(r=p(n,e.xMin,l),i=p(n,e.xMax,f),l=Math.min(r,i),f=Math.max(r,i)),o&&(r=p(o,e.yMin,c),i=p(o,e.yMax,s),s=Math.min(r,i),c=Math.max(r,i))}return{x:l,y:s,x2:f,y2:c,width:f-l,height:c-s,options:a({},[n,e])}}function w(t,e,n){if(e.drawTime!==n)return;const{ctx:o,chartArea:r}=t,a=y.get(t);!function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}(o,r);for(let t=0;t<a.length;t++){const e=a[t];(e.options.drawTime||n)===n&&e.draw(o)}!function(t){t.restore()}(o)}return t.Chart.register(b,i,c),b}));
//# sourceMappingURL=chartjs-plugin-annotation.min.js.map
